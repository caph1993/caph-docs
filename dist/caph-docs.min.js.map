{"version":3,"file":"caph-docs.min.js","mappings":"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","sources":["webpack://caph/./src/parser.js","webpack://caph/./src/utils.js","webpack://caph/webpack/bootstrap","webpack://caph/webpack/runtime/define property getters","webpack://caph/webpack/runtime/hasOwnProperty shorthand","webpack://caph/webpack/runtime/make namespace object","webpack://caph/./src/collections.js","webpack://caph/./src/build-constants.js","webpack://caph/./src/script-loader.js","webpack://caph/./node_modules/.pnpm/preact@10.10.6/node_modules/preact/dist/preact.module.js","webpack://caph/./node_modules/.pnpm/preact@10.10.6/node_modules/preact/hooks/dist/hooks.module.js","webpack://caph/./src/preact-parser.js","webpack://caph/./src/preact-globals.js","webpack://caph/./src/main.js","webpack://caph/./src/index.js"],"sourcesContent":["//@ts-check\n/// <reference path=\"types.js\" />\nimport { isString, assert, assertNonNull } from \"./utils.js\";\n\n/** @typedef {({children, ...props})=>any} ComponentType*/\n/** @typedef {Object} AttributesType*/\n/** @typedef {string|ComponentType|null} TagType*/\n/**\n * @typedef {(type:any, props:any, ...children)=>(any extends Array? never: any)} CreateElementType\n*/\n/** @typedef {(text:string) => AstNode} RuleParser*/\n/** @typedef {{regStart:string, regEnd:string, parser:RuleParser}} CustomRule*/\n\n/**\n * @typedef {[null, null, AstNodeArray]|[string|ComponentType, AttributesType|null, AstNodeArray]} AstParent\n */\n/**\n * @typedef {string|AstParent} AstNode\n*/\n/** @typedef {AstNode[]} AstNodeArray*/\n\n\n\n/**@param {string} str*/\nfunction htmlSafe(str) {\n  // e.g. converts < into &lt;\n  return new Option(str).innerHTML;\n}\n\nconst htmlSafeUndo = (/** @type {string} */ str)=>{\n  // e.g. converts &lt; into <, etc. Prevents left trim caused by DOMParser\n  const [, l, content] = assertNonNull(str.match(/^(\\s*)(.*)$/s));\n  const doc = new DOMParser().parseFromString(content, \"text/html\");\n  const text = l+(doc.documentElement.textContent || '');\n  // if(str!=text) console.log(`Converted ${str} into ${text}`)\n  return text;\n}\n\n\n//https://stackoverflow.com/a/70329711\n\nexport const AstParser = (class {\n\n  ESC = '\\ue000';\n  SPEC = `https://html.spec.whatwg.org/multipage/syntax.html`;\n  DEBUG = false;\n\n\n  static parseAst(/** @type {TemplateStringsArray} */{raw:strings}, ...values){\n    const cls = this;\n    return new cls(strings, values).root\n  }\n\n  warn(...args){console.warn(...args)}; // Overriden during tests\n  error(...args){console.error(...args)}; // Overriden during tests\n\n\n  /**\n   * @param {readonly string[]} strings\n   * @param {readonly any[]} values\n   * @param {readonly CustomRule[]} customRules\n   * @param {0|1|2} debug\n  */\n  constructor(strings, values, customRules=[], debug=0){\n    /** @type {typeof AstParser} */ //@ts-ignore\n    this.cls = this.constructor;\n    let str = strings.join(this.ESC);\n    let escaped = {};\n    let regEscaped = new RegExp(`${this.ESC}|\\\\\\\\\"|\\\\\\\\'`, 'g');\n    str = str.replace(regEscaped, (match, index)=>{\n      //console.log(`Escaping ${match} at ${index}`);\n      escaped[index] = match;\n      return this.ESC;\n    });\n    this.pos = 0;\n    this.str = str;\n    this.values = values;\n    this.valueIndex = 0;\n    this.escaped = escaped;\n    this.errorStop = false;\n    debug && console.log('PARSING', this.str);\n    this.DEBUG = debug==2;\n\n    //console.log(this.cls);\n    /** @type {readonly CustomRule[]} */\n    this.customRules = customRules;\n    /** @type {(tag:TagType)=>(null|string[])} */\n    this.optionalClose = this.cls.optionalClose.bind(this.cls);\n\n    this.REG_EXP_TEXT = new RegExp(`.*?(?=${[\n      '$', '<', this.ESC,\n      ...this.customRules.map(({regStart})=>regStart),\n    ].join('|')})`, 'ys');\n\n    /**@type {AstParent} */\n    this.parent = [null, null, []];\n    /**@type {AstNode} */\n    this.root = this.parent;\n    this.parseRoot();\n\n    /**@param {CreateElementType} createElement @param {ComponentType} FragmentComponent*/\n    this.evalTree = (createElement, FragmentComponent)=>{\n      const evalTree = (/** @type {AstNode}*/ root) => {\n        if (!Array.isArray(root)) return root;\n        let [tag, props, children] = root;\n        if(tag=='@injected') return root[2][0];\n        assert(Array.isArray(children));\n        children = children.map(child =>evalTree(child));\n        if(tag==null){\n          assert(props==null);\n          tag = FragmentComponent;\n        }\n        return createElement(tag, props, ...children);\n      }\n      return evalTree(this.root);\n    }\n    \n  }\n  \n  parseRoot(){\n    try{\n      this.parseChildrenAndParentClose();\n      assert(this.parent===this.root);\n    } catch (error){\n      console.log(error);\n      if(error.name !== 'caph-parser-error') throw error;\n      if(this.pos==this.str.length && this.parent===this.root){\n        // Pass. Safe error: expected </> at end because we simulate a fragment root\n      } else{ this.error(error)}\n    }\n    if(this.parent===this.root && this.root[2].length == 1) this.root = this.root[2][0];\n  }\n\n  get parentTag(){ return this.parent[0]; }\n  get parentProps(){ return this.parent[1]; }\n  get children(){ return this.parent[2]; }\n\n  childlessTags = {\n    br: true, '!doctype': true, area: true, base: true, col: true, command: true, embed: true, hr: true,img: true, input: true, keygen: true, link: true, meta: true, param: true, source: true, track: true, wbr: true\n  };\n\n  // spacePreservingTags = {\n  //   pre: true, span: true, code: true, p: true, b: true, i: true,\n  //   a: true, li: true,\n  // };\n\n  // https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n  /** @type {{[key:string]:string[]}}*/\n  static _optionalClose = {\n    'li': ['li'],\n    'dt': ['dt', 'dd'],\n    'dd': ['dd', 'dt'],\n    'p': ['p', 'address', 'article', 'aside', 'blockquote', 'details', 'div', 'dl', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'main', 'menu', 'nav', 'ol', 'pre', 'section', 'table'],\n    'rt': ['rt', 'rp'],\n    'rp': ['rp', 'rt'],\n    'optgroup': ['optgroup'],\n    'option': ['option', 'optgroup'],\n    //'caption': [], // Disabled rule\n    //'colgroup': [], // Disabled rule\n    'thead': ['tbody','tfoot'],\n    'tbody': ['tbody', 'tfoot'],\n    'tfoot': [],\n    'tr': ['tr'],\n    'td': ['td', 'th'],\n    'th': ['th', 'td'],\n  };\n\n  static optionalClose(/** @type {TagType}*/ tag){\n    if(!tag || !isString(tag)) return null;\n    return this._optionalClose[tag];\n  }\n\n  run(/** @type {RegExp}*/regExp){\n    // Execute the regular expression on str at pos, and move forward\n    const {pos, str} = this;\n    regExp.lastIndex = pos;\n    const match = regExp.exec(str);\n    if(!match) this.throw(`No match for ${regExp}`);\n    if(match.index<pos) throw `Regexp must use 'ys' flag. Match for at ${match.index} is before previous match at ${pos}`;\n    this.pos += match[0].length;\n    return match;\n  }\n\n  tryRun(/** @type {RegExp}*/regExp){\n    try{ return this.run(regExp); }\n    catch(e){ return null; }\n  }\n  tryRunUndo(/** @type {RegExp}*/regExp){\n    const pos = this.pos;\n    try{ return this.run(regExp); }\n    catch(e){ return null; }\n    finally{ this.pos = pos; }\n  }\n\n  debugPosition(delta=0, length=50){ // Just for printing debug info\n    const {pos, str} = this;\n    const at = Math.max(0, pos+delta);\n    const short = str.slice(at, at+length).replace('\\n', '(\\\\n)');\n    return `${at}...${short}...${at+length}`;\n  }\n\n  parseChildrenAndParentClose(){\n    /*\n      Parses the children of a parent tag or fragment.\n      Called (i) from the root level,\n      or (ii) after a parent \"head\" (`<div ...>`) has been consumed,\n      or (iii) after a sibling has been consumed entirely.\n     */\n    while(true){ // capture children until parent close tag is found or end is reached\n      this.DEBUG && console.log('parseSibling', this.parent, this.debugPosition());\n      // Parse text preceeding the first sibling\n      let [text] = this.run(this.REG_EXP_TEXT);\n      if(text.length) this.children.push(text);\n  \n      if(this.tryRun(new RegExp(`${this.ESC}`, 'ys'))){\n        let value = this.values[this.valueIndex++];\n        for(value of Array.isArray(value)?value:[value]){\n          if(value||value===0) this.children.push(['@injected', null, [value]]);\n        }\n        continue;\n      }\n\n      // Comment, DOCTYPE, or CDATA\n      if(this.str.startsWith('<!', this.pos)){\n        this.consumeComment();\n        continue;\n      }\n\n      let endReached = this.pos==this.str.length;\n      if(endReached && this.parentTag && !this.optionalClose(this.parentTag))\n          this.throw(`Expected closing tag </${this.parentTag}> or </>`);\n      if(endReached) break;\n      \n      if(this.customRules.length){\n        const parsedRule = (()=>{\n          for(let {regStart, regEnd, parser} of this.customRules){\n            let m = this.tryRun(new RegExp(`${regStart}(.*?)(${regEnd})`, 'ys'));\n            if(m) return parser(this.replaceText(m[1], this.pos-m[2].length-m[1].length));\n          }\n          return null;\n        })();\n        if(parsedRule){\n          this.children.push(parsedRule);\n          continue;\n        }\n      }\n\n      // Parent close\n      let /** @type {TagType} */ tag;\n      if(this.tryRun(/<\\/\\s*>/ys)) break;\n      if(this.tryRun(/<\\//ys)){\n        let result = this.tryRun(new RegExp(`([^>\\\\s]+)\\\\s*>`, 'ys'));\n        if(!result) this.throw(`Expected close tag for parent ${this.parentTag||'fragment'}`);\n        let _tag = result[1];\n        if (_tag==this.ESC) tag = this.values[this.valueIndex++];\n        else tag = _tag;\n        if(tag!==this.parentTag) this.throw(`Unmatched close tag ${tag}!=${this.parentTag}`);\n        break;\n      }\n\n      const optionalClose = this.optionalClose(this.parentTag);\n      if(optionalClose){\n        if((()=>{\n          for(let tag of optionalClose){\n            if(this.tryRunUndo(new RegExp(`<${tag}(>|\\\\s)`, 'ys'),)){\n              return true;\n            }\n          }\n        })()) break;\n      }\n\n      const /** @type {AstParent} */ newParent = [null, null, []];\n      this.children.push(newParent);\n\n      const grandParent = this.parent;\n      this.parent = newParent; // change parent temporarily\n      this.parseParent(grandParent); // this restores parent\n      \n      if(newParent[0] == null){ // shortcut fragment nieces as siblings\n        assert(this.children.pop() === newParent);\n        this.children.push(...newParent[2]);\n      }\n    }\n  }\n\n  parseParent(grandParent){\n    /*\n      Parses an element from the \"head\" opening (`<div ...>`)\n      until the \"tail\" close  (`</div>` or `</>`). \n      Called just at the beginning of the head opening.\n    */\n    this.DEBUG && console.log('parseParent ', this.parent, this.debugPosition());\n\n    let reg = new RegExp(`<([^\\\\s>\\\\/\\\\.]*)`, 'ys');\n    let _tag = this.run(reg)[1];\n    let /** @type {TagType} */ tag;\n    if (_tag==this.ESC){\n      tag = this.values[this.valueIndex++];\n      if(isString(tag)) this.throw(`Tag must be a component, not a string.`);\n    }\n    else if(!_tag.length) tag = null; //null means fragment\n    else if(_tag.match(/[^a-z0-9._-]/i)) this.throw(`Error with tag ${_tag}`);\n    else tag = _tag;\n    if (tag === undefined) this.throw(`Undefined component`);\n    \n    this.parent[0] = tag;\n    let admitsChildren = !this.childlessTags[(''+tag)?.toLowerCase()];\n    let /** @type {'jsx'|'tex'|'raw'|'pre'|null}*/ spacing=null;\n    \n    while(true){ // While attributes\n\n      this.run(/\\s*/ys); // Consume whitespace after `<div` or after attribute value\n      const endReached = this.pos==this.str.length;\n      if(endReached) this.throw(`Expected closing end ...> or .../> for tag ${tag}`);\n      \n      // Handle head close\n      if(this.tryRun(/\\/>/ys)){ admitsChildren = false; break; }\n      else if(this.tryRun(/>/ys)) break;\n\n      // Read next attribute\n      if(!this.parentProps) this.parent[1] = {};\n      if(this.tryRun(new RegExp(`\\\\.\\\\.\\\\.${this.ESC}`, 'ys'))){\n        this.parent[1] = {...this.parentProps, ...this.values[this.valueIndex++]};\n      }\n      else{\n        let [key] = this.run(/.*?(?=\\s|>|=)/ys);\n        let _value = this.tryRun(/=/ys) && this.run(new RegExp(`\\\\\".*?\\\\\"|\\\\'.*?\\\\'|${this.ESC}`, 'ys'))[0];\n        let value;\n        // .innerHTML may transform `<div attr >` into `< attr=\"\" >`\n        if(!_value || _value==\"''\"||_value=='\"\"') value = true; \n        else if(_value==this.ESC) value = this.values[this.valueIndex++];\n        else value = this.replaceText(_value.slice(1,-1), this.pos-_value.length+1); // slice for quotes\n        if(key.endsWith('-eval')){\n          key = key.slice(0,-5);\n          value = eval(value);\n        }\n        const prevValue = this.parentProps[key];\n        if(key=='class') value = !prevValue?value:prevValue+' '+value;\n        else if(key=='style') value = !prevValue?value:prevValue+' '+value;\n        else if(prevValue!==undefined) this.warn(`Replacing attribute ${key}.\\nPrevious and new values:`, prevValue, value);\n        \n        if(key.startsWith('(')){\n          if(key=='(component)') {} // ?? temporary code\n          else if(key=='(spacing)'){\n            if(!['jsx', 'pre', 'tex', 'raw'].includes(value)) this.throw(`Invalid spacing mode: ${value}`);\n            spacing = value;\n            continue;\n          } else this.throw(`Invalid attribute: ${key}`);\n        }\n        this.parentProps[key] = value;\n      }\n    }\n\n    if(admitsChildren){\n      if(tag=='style'){ // Style is closed differently\n        let m = this.tryRun(/(.*?)<\\/style\\s*>/ys);\n        if(!m) this.throw(`Style tag not closed properly.`);\n        this.parent[2] = [m[1]];\n      } else if(tag=='script'){ // Script is closed differently\n        let m = this.tryRun(/(.*?)<\\/script\\s*>/ys);\n        if(!m) this.throw(`Script tag not closed properly.`);\n        let code = m[1];\n        if(code.match(/^\\s*(String\\.raw)?\\`(.*)\\`\\s*$/ys)){\n          code = eval(code);\n          code = htmlSafe(code);\n          this.parent[0] = 'div';\n          this.parent[1] = {'(component)':'code', ...this.parentProps};\n          this.parent[2] = [code];\n        } else{\n          this.parent[2] = [code];\n        }\n      } else{\n        this.parseChildrenAndParentClose(); // (Huge step)\n        if(!spacing){\n          if(!isString(tag)) spacing = 'jsx';\n          else if(tag=='pre' || tag=='textarea') spacing = 'pre';\n          else spacing = 'jsx';\n        }\n        if(spacing=='jsx') this.parent[2] = this.cls.spacingRulesJsx(this.children);\n        else if(spacing=='tex') this.parent[2] = this.cls.spacingRulesParagraphs(this.children);\n      }\n    }\n    this.parent = grandParent;\n  }\n\n  static spacingRulesJsx(children){ // JSX spacing\n    // https://reactjs.org/blog/2014/02/20/react-v0.9.html#jsx-whitespace\n    // https://www.w3.org/TR/REC-html40/struct/text.html#h-9.1\n    // https://stackoverflow.com/q/433493\n    \n    function trimText(text){\n      // End spaces are preserved only if they are inline\n      return text.replace(/^(\\s*)(.*?)(\\s*)$/s, (_, l, middle, r)=>{\n        if(l.includes('\\n')) l='';\n        if(r.includes('\\n')) r='';\n        return `${l}${middle}${r}`\n      });\n    }\n    const ESC = '\\ue000';\n    const stack = children.filter(x=>!isString(x)).reverse();\n    const text = children.map(x=>isString(x)?x:ESC).join('');\n    const newChildren = [];\n    text.split(ESC).forEach((str, i)=>{\n      if(i) newChildren.push(stack.pop());\n      if(str.length) str = trimText(str);\n      if(str.length) newChildren.push(str);\n    })\n    assert(stack.length==0);\n    return newChildren;\n  }\n\n  // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n  static spacingRulesPre(children){\n    const first = children[0];\n    if(isString(first) && first.startsWith('\\n')) children[0] = children[0].slice(1);\n    return children;\n  }\n\n  static spacingRulesParagraphs(children){\n    const ESC = '\\ue000';\n    const stack = children.filter(x=>!isString(x)).reverse();\n    const text = children.map(x=>isString(x)?x:ESC).join('');\n    /** @type {AstNode[]}*/\n    const newChildren = text.split(/\\s*?\\n\\s*?\\n\\s*/s).map(text=>{\n      const elems = [];\n      text.split(ESC).forEach((str, i)=>{\n        if(i) elems.push(stack.pop());\n        if(str.length) elems.push(str);\n      })\n      return ['div', {'class':\"caph-paragraph\"}, elems];\n    });\n    assert(stack.length==0);\n    return newChildren;\n  }\n\n  /** @type {(reason:string)=>never}*/\n  throw(reason){\n    const error = new Error(`${reason}\n      Ignoring what follows.\n      Error occurred here:\n      ${this.debugPosition(-5)}\n    `);\n    error.name = 'caph-parser-error';\n    throw error;\n  }\n\n  consumeComment(){\n    const regComment = new RegExp(\n      [`<!--.*?-->`, `<!\\\\[CDATA\\\\[.*?\\\\]\\\\]>`, `<!DOCTYPE\\\\s*.*?>`,].join('|'),\n      'iys',\n    );\n    let result = this.tryRun(regComment);\n    if(!result) this.throw(`Unexpected <!`);\n    let [text] = result;\n    if(text.endsWith('/>')) this.warn(`Non compliant tag found.\\n${this.SPEC}`);\n    this.replaceText(text, this.pos-text.length); // Consume the fields inside, if any\n  }\n\n  /**\n   * @param {string} text\n   * @param {number} posOfText\n   * @returns {string}*/\n  replaceText(text, posOfText){\n    return text.replace(new RegExp(this.ESC, 'g'), (_, index)=>{\n      assert(this.str[posOfText+index] === this.ESC);\n      const original = this.escaped[posOfText+index];\n      if (original != this.ESC) return original;\n      return this.values[this.valueIndex++];\n    });\n  }\n  // asString(obj) {\n  //   let out = `${obj}`;\n  //   if (out == \"[object Object]\") {\n  //     // let seen = [];\n  //     // out = JSON.stringify(obj, function (key, val) {\n  //     //   if (val != null && typeof val == \"object\") {\n  //     //     if (seen.indexOf(val) >= 0) return;\n  //     //     seen.push(val);\n  //     //   }\n  //     //   return val; // https://stackoverflow.com/q/9382167\n  //     // });\n  //     out = obj; //PROBLEM\n  //   }\n  //   return out;\n  // }\n\n});\n\n\nconst exampleCreateElement = /**@type {CreateElementType} */ (type, props, ...children)=> (!type||isString(type))? {tag:type, props, children} : type({children, ...props});\n\nconst exampleFragmentComponent = /**@type {ComponentType} */  (({children})=>({tag:null, props:null, children}));\n\nconst exampleCustomRules = /** @type {CustomRule[]} */ [\n  {\n    regStart: `(?<!\\\\\\\\)\\\\$\\\\$`,\n    regEnd: `(?<!\\\\\\\\)\\\\$\\\\$`,\n    parser: /**@type {RuleParser}*/ ((text)=>['div', {'(component)': '@math', displayMode:true}, [text]]),\n  },\n  {\n    regStart: `(?<!\\\\\\\\)\\\\$`,\n    regEnd: `(?<!\\\\\\\\)\\\\$`,\n    parser: /**@type {RuleParser}*/ ((text)=>['div', {'(component)': '@math', displayMode:false}, [text]]),\n  },\n  {\n    regStart: `(?<!\\\\\\\\)\\`\\`\\``,\n    regEnd: `(?<!\\\\\\\\)\\`\\`\\``,\n    parser: /**@type {RuleParser}*/ ((text)=>{\n      text = text.replace(/\\\\\\`\\`\\`/g, '```');\n      let progLang = assertNonNull(text.match(/^[^\\n]*/));\n      return ['div', {'(component)': '@code', ...(!progLang.length?{}:{progLang})}, [text]];\n    }),\n  },\n  {\n    regStart: `(?<!\\\\\\\\)\\``,\n    regEnd: `(?<!\\\\\\\\)\\``,\n    parser: /**@type {RuleParser}*/ ((text)=>{\n      text = text.replace(/\\\\\\`/g, '`');\n      return ['div', {'(component)': '@code'}, [text]]\n    }),\n  },\n];\n\n\n\nexport const createParser = ()=>{\n\n  const settings = {\n    createElement: exampleCreateElement,\n    FragmentComponent: exampleFragmentComponent,\n    customRules: exampleCustomRules,\n    debug: /** @type {0|1|2}*/(0),\n  }\n  \n  const parseAst = (/** @type {TemplateStringsArray} */ templateString, ...values)=> new AstParser(templateString.raw, values, settings.customRules, settings.debug);\n  \n  const parse = (/** @type {TemplateStringsArray} */ templateString, ...values)=> parseAst(templateString, ...values).evalTree(settings.createElement, settings.FragmentComponent);\n\n  const astUndoHtml = (/** @type {AstNode}*/ root) => {\n    if (isString(root)) return htmlSafeUndo(root);\n    if (!Array.isArray(root)) return root;\n    root[2] = root[2].map(child => astUndoHtml(child));\n    return root;\n  }\n  const parseAstHtml = (/** @type {string}*/str) => {\n    // Parse html, undoing html safe conversions, and then create element\n    let tmp = /** @type {TemplateStringsArray}*/(/**@type {any}*/({raw:[str]}));\n    let ast = parseAst(tmp);\n    ast.root = astUndoHtml(ast.root)\n    return ast;\n  }\n  const parseHtml = (/** @type {string}*/str) => parseAstHtml(str).evalTree(settings.createElement, settings.FragmentComponent);\n\n  return { settings, parse, parseAst, parseAstHtml, parseHtml, }\n}\n\n","//@ts-check\n\n/** https://github.com/Microsoft/TypeScript/issues/23405#issuecomment-873331031 */\n/** @template T  @param {T} value @param {string} [valueName] @returns {T extends undefined ? never : T} */\nexport function assertDefined(value, valueName) {\n  if (value === undefined) {\n    throw new Error(`Encountered unexpected undefined value${valueName? ` for '${valueName}'` : \"\"}`);\n  }\n  return /** @type {*} */ (value);\n}\n\n/** @template T @param {T} value @returns {T extends null ? never : T} */\nexport function assertNonNull(value) {\n  if (!value && (value===null||value === undefined)) throw new Error(`Encountered unexpected undefined value`);\n  return /** @type {*} */ (value);\n}\n\n/** @template T @param {T} value @returns {T extends null ? never : T} */\nexport function nonNull(value) { return /** @type {*} */ (value); }\n\n/** @type {(n: number) => number[]} */\nexport function range(n) {\n  return [...Array(n).fill(0)].map((x,i)=>i);\n}\n\n/** @type {(obj: any) => obj is String} */\nexport function isString(obj) {\n  return Object.prototype.toString.call(obj) === \"[object String]\";\n}\n\n// utils = {\n//   unindent: (text) => {\n//     let lines = text.split('\\n');\n//     let n = lines.filter(l => l.trim().length)\n//       .map(l => l.length - l.trimStart().length)\n//       .reduce((p, c) => Math.min(c, p), 1000);\n//     return lines.map(l => l.slice(n)).join('\\n');\n//   }\n// };\n// _URL_resolve(url) {\n//   return new URL(url, document.baseURI).href;\n// }\n// // _URL_is_absolute(url) {\n// //   //https://stackoverflow.com/q/10687099\n// //   return new URL(document.baseURI).origin !== new URL(url, document.baseURI).origin;\n// // }\n\n// _html_safe(str) {\n//   // e.g. converts < into &lt;\n//   return new Option(str).innerHTML;\n// }\n// _html_safe_undo(str) {\n//   // e.g. converts &lt; into <\n//   const doc = new DOMParser().parseFromString(str, \"text/html\");\n//   const text = doc.documentElement.textContent;\n//   return text;\n// }\n\n\nexport function assert(/** @type {boolean|any}*/condition, ...messages) {\n  if (condition) return;\n  throw new Error(...messages);\n}\n\nexport function sleep(/** @type {number}*/ms) {\n  return new Promise((ok, err) => setTimeout(ok, ms));\n}\n\n/** @param {any} first @param {any} second  @param {any[]} more*/\nexport function assertEq(first, second, ...more) {\n  for(let other of [second, ...more]){\n    if (first==other) continue;\n    if (Array.isArray(first) && Array.isArray(other) && arrayEq(first, other)) continue;\n    throw new Error('Elements are different');\n  }\n}\n/** @param {any[]} first @param {any[]} second  @param {any[][]} more*/\nexport function arrayEq(first, second, ...more) {\n  for(let other of [second, ...more]){\n    if(first.length != other.length) return false;\n    for(let i=0;i<first.length;i++){\n      if(first[i]!=other[i]) return false;\n    }\n  }\n  return true;\n}\n\nclass MyBoolean {\n  static assert(condition, ...messages) {\n    if (condition) return;\n    throw new Error(...messages);\n  }\n  static all(arr) {\n    for (let x of arr) if (!x) return false;\n    return true;\n  }\n  static any(arr) {\n    for (let x of arr) if (x) return true;\n    return false;\n  }\n  static assert_all(arr, ...messages) { assert(this.all(arr), ...messages); }\n  static assert_any(arr, ...messages) { assert(this.any(arr), ...messages); }\n}\n\n\nclass MyArray {\n  static any(arr) {\n    for (let x of arr) if (x) return true;\n    return false;\n  }\n  static all(arr) {\n    for (let x of arr) if (!x) return false;\n    return true;\n  }\n  static sum(arr) {\n    return arr.reduce((p, c) => p + c, 0);\n  }\n  static max(arr, initialValue) {\n    initialValue = initialValue || 0;\n    return arr.reduce((p, c) => Math.max(p, c), initialValue);\n  }\n  static min(arr, initialValue) {\n    initialValue = initialValue || 1e10;\n    return arr.reduce((p, c) => Math.min(p, c), initialValue);\n  }\n  static zeros(n) {\n    const l = [];\n    for (let i = 0; i < n; i++)l.push(0);\n    return l;\n  }\n  static arange(n) {\n    return MyArray.zeros(n).map((z, i) => i);\n  }\n  static sEquality(a, b) {\n    if (a === b) return true;\n    if (a == null || b == null) return false;\n    if (a.length !== b.length) return false;\n    for (let i = 0; i < a.length; ++i) if (a[i] != b[i]) return false;\n    return true;\n  }\n  static hEquality(a, b) {\n    if (a === b) return true;\n    if (a == null || b == null) return false;\n    if (a.length !== b.length) return false;\n    for (let i = 0; i < a.length; ++i) if (a[i] !== b[i]) return false;\n    return true;\n  }\n}\n\nexport class MyPromise {\n  static async sleep(ms) {\n    await new Promise((ok, err) => setTimeout(ok, ms));\n  }\n  static async finish_all(promises, { debug = false } = {}) {\n    // Ensures completion of all promises even if some throw exceptions\n    return await new Promise((ok, err) => {\n      if (promises.length == 0) return ok([]);\n      let any_error = false;\n      let cnt = 0;\n      let outs = promises.map((p) => null);\n      Promise.all(promises.map(async (p, i) => {\n        try { outs[i] = await p; }\n        catch (e) {\n          any_error = true; outs[i] = e;\n          if (debug) console.error(...e);\n        }\n        cnt++;\n        if (cnt == promises.length) {\n          if (any_error) err(outs);\n          else ok(outs);\n        }\n      }));\n    });\n  }\n  static async finish_all_log(promises) {\n    try { var outs = await MyPromise.finish_all(promises); }\n    catch (err) {\n      var outs = err; console.error(...err);\n      err.forEach(e => console.warn(...e));\n    }\n    return outs;\n  }\n\n  static async until(/** @type {()=>any}*/ func, { ms = 200, timeout = 0 } = {}) {\n    if (timeout && ms > timeout) ms = timeout / 10;\n    let t0 = (new Date()).getTime();\n    let value;\n    while (!(value = await func())) {\n      if (timeout && (new Date()).getTime()-t0 > timeout)\n        throw MyPromise.Timeout;\n      await sleep(ms);\n    }\n    return value;\n  }\n  static Timeout = new Error('Timeout');\n  static async timeout(promise, ms) {\n    let finished = false;\n    let [resp, _] = await Promise.all([\n      promise.then(e => { finished = true; return e; }),\n      MyPromise.until(() => finished, { timeout: ms })\n    ]);\n    return resp;\n  }\n}\nexport const until=MyPromise.until;\n\n\nexport class MyDocument {\n\n  /**\n   * @param {string} tag \n   * @param {{\n   *  style?: {[key: string]: string},\n   *  id?: string,\n   * classList?: string[],\n   * text?: string,\n   * html?: string,\n   * eventListeners?: {[key: string]: (e: Event) => void},\n   * parent?: HTMLElement,\n   * where?: 'beforebegin' | 'afterbegin' | 'beforeend' | 'afterend',\n   * }} options\n   * @returns {HTMLElement}\n   */\n  static createElement(tag, {\n    style = {}, id, classList = [], text, html,\n    eventListeners = {}, parent, where, ...attrs } = {}) {\n    let e = document.createElement(tag);\n    if(id!==undefined) e.setAttribute(\"id\", id);\n    classList.forEach(s => e.classList.add(s));\n    if (text !==undefined) e.innerText = text;\n    if (html !==undefined) e.innerHTML = html;\n    if (id !==undefined) e.id = id;\n    MyObject.forEach(attrs, (value, key) => e.setAttribute(key, value));\n    MyObject.forEach(style, (value, key) => e.style[key] = value);\n    MyObject.forEach(eventListeners, (value, key) =>\n      e.addEventListener(key, value));\n    if (parent || where) {\n      parent = parent || document.body;\n      where = where || 'beforeend';\n      parent.insertAdjacentElement(where, e);\n    }\n    return e;\n  }\n  static right_click(element) {\n    element.focus();\n    if (window.CustomEvent) {\n      element.dispatchEvent(new CustomEvent('contextmenu'));\n    } else if (document.createEvent) {\n      var ev = document.createEvent('HTMLEvents');\n      ev.initEvent('contextmenu', true, false);\n      element.dispatchEvent(ev);\n    } else { // Internet Explorer\n      element.fireEvent('oncontextmenu');\n    }\n    // return;\n    // element.focus();\n    // let e = element.ownerDocument.createEvent('MouseEvents');\n    // e.initMouseEvent('contextmenu', true, true,\n    //   element.ownerDocument.defaultView, 1, 0, 0, 0, 0, false,\n    //   false, false, false, 2, null);\n    // return !element.dispatchEvent(e);\n  }\n}\n\nclass MyObject {\n\n  static indexBy(arr, key) {\n    let M = {};\n    arr.forEach((obj) => {\n      let value = obj[key];\n      M[value] = obj;\n    });\n    return M;\n  }\n\n  /** @param {Object} obj */\n  /** @param {((value:any, key?:any, obj?:any)=>(any))} func */\n  static map(obj, func) {\n    return MyObject._object_op('map', obj, func);\n  }\n\n  /** @param {Object} obj */\n  /** @param {((value:any, key?:any, obj?:any)=>(boolean|any))} func */\n  /** @returns {Object} */\n  static filter(obj, func) {\n    return MyObject._object_op('filter', obj, func);\n  }\n\n  /** @param {Object} obj */\n  /** @param {((value:any, key?:any, obj?:any)=>(any))} func */\n  static apply(obj, func) {\n    return MyObject._object_op('apply', obj, func);\n  }\n\n  /** @param {Object} obj */\n  /** @param {((value:any, key?:any, obj?:any)=>(any))} func */\n  static forEach(obj, func) {\n    return MyObject._object_op('forEach', obj, func);\n  }\n\n  /** @param {Object} src */\n  /** @param {'apply'|'filter'|'forEach'|'map'} op*/\n  static _object_op(op, src, func) {\n    assert(1 <= func.length && func.length <= 3);\n    let dest = {};\n    for (let key of Object.keys(src)) {\n      let value = src[key]\n      let result = MyObject._func(func, value, key, src);\n      if (op == 'map') dest[key] = result;\n      else if (op == 'filter') { if (result) dest[key] = value; }\n      else if (op == 'apply') src[key] = result;\n      else if (op == 'forEach') 1 == 1;\n    }\n    return (op == 'map' || op == 'filter') ? dest : null;\n  }\n\n  static _func(func, value, key, src) {\n    return (\n      func.length == 1 ? func(value)\n        : func.length == 2 ? func(value, key)\n          : func(value, key, src)\n    );\n  }\n\n  static reduce_dots(obj) {\n    // converts {'a.b':1, 'a.c':2, b:3} into {a:{b:1,c:2}, 'b':3}. Returns copy (shallow or deep)\n    let dotted = MyObject.filter(obj, (v, k) => k.indexOf('.') >= 0);\n    let no_dots = MyObject.filter(obj, (v, k) => k.indexOf('.') == -1);\n    if (Object.keys(dotted).length == 0) return no_dots;\n    MyObject.forEach(dotted, (v, k) => {\n      let start = k.slice(0, k.indexOf('.'));\n      let end = k.slice(k.indexOf('.') + 1);\n      no_dots[start] = no_dots[start] || {};\n      no_dots[start][end] = v;\n    });\n    return MyObject.reduce_dots(no_dots);\n  }\n\n  static deep_assign(obj, ...objs) {\n    for (let o of objs) {\n      if (!o) continue;\n      for (let key of Object.keys(o)) {\n        if (obj[key] === undefined || typeof (o[key]) != \"object\") obj[key] = o[key];\n        else MyObject.deep_assign(obj[key], o[key]);\n      }\n    }\n    return obj;\n  }\n\n  static deep_copy(obj, ...objs) {\n    if (obj === undefined) return undefined;\n    if (obj === null) return null;\n    if (Array.isArray(obj))\n      return obj.map(x => MyObject.deep_copy(x));\n    if (typeof (obj) == \"object\")\n      return MyObject.map(obj, value => MyObject.deep_copy(value));\n    if (typeof (obj) == \"function\")\n      return obj; // DOES NOT CREATE COPY FOR FUNCTIONS\n    return MyObject.deep_assign(obj, ...objs);\n  }\n\n  static deep_default(default_obj, ...objs) {\n    let obj = MyObject.deep_copy(default_obj);\n    return MyObject.deep_assign(obj, ...objs);\n  }\n\n  /** @param {((value:any, key?:any, obj?:any)=>(boolean|any))} filter_func */\n  static find(obj, filter_func) {\n    for (let key in obj)\n      if (MyObject._func(filter_func, obj[key], key))\n        return key;\n    return null;\n  }\n  static toEntries(obj) {\n    return Object.keys(obj).map(k => [k, obj[k]]);\n  }\n}\n\n\nclass MyDecorators {\n  static once(fn) {\n    let returnValue, canRun = true;\n    return function runOnce() {\n      if (canRun) {\n        returnValue = fn.apply(this, arguments);\n        canRun = false;\n      }\n      return returnValue;\n    }\n  }\n}\n\n\nfunction get_property_handler(object, property) {\n  let access, proto = object;\n  object._hidden_modified = false;\n  while (!access) {\n    proto = Object.getPrototypeOf(proto);\n    access = Object.getOwnPropertyDescriptor(proto, property);\n  }\n  return access;\n}\n\nfunction update_property_handler(object, property, create_handler) {\n  let prev = get_property_handler(object, property);\n  Object.defineProperty(object, property, create_handler(prev));\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","//@ts-check\nimport { isString, range } from \"./utils.js\";\n\n/**@template T */\nexport const BruteForceQueue = class {\n  /** @param {T[]} items*/\n  constructor(...items) { this.arr=items||[]; }\n  get length() { return this.arr.length; }\n  *[Symbol.iterator]() { for(let x of this.arr) yield x; };\n  /** @param {T} x*/\n  pushRight(x) { this.arr.push(x); }\n  /** @param {T} x*/\n  pushLeft(x) { this.arr.unshift(x); }\n  popRight() { return this.arr.pop(); }\n  popLeft() { return this.arr.shift(); }\n}\n\n\n/**@template T */\nexport const Queue = class {\n\n  /** @param {T[]} items*/\n  constructor(...items) {\n    /** @type {T[]} */\n    this.arr = [...(items || [])];\n    this.start = 0;\n    this.iterI = 0;\n  }\n  get length() { return this.arr.length-this.start; }\n  _resize(){\n    // Guarantees some unallocated space at the left side\n    const m = 1 + (this.length>>1);\n    //@ts-ignore: ...annoying bug in jsdoc+vscode with...\n    this.arr = [...Array(m).fill(null), ...this];\n    this.iterI = this.iterI - this.start + m;\n    this.start = m;\n  }\n  *[Symbol.iterator]() {\n    this.iterI = this.start;\n    while(this.iterI < this.arr.length){\n      let i = this.iterI++;\n      yield this.arr[i];\n    }\n  }\n  /** @param {T} x*/\n  pushRight(x) { this.arr.push(x); }\n  /** @param {T} x*/\n  pushLeft(x) {\n    if(this.start==0) this._resize();\n    this.arr[--this.start] = x;\n  }\n  popRight() {\n    if(this.start==this.arr.length) return undefined;\n    if(2*this.length < this.arr.length) this._resize();\n    return this.arr.pop();\n  }\n  popLeft() {\n    if(this.start==this.arr.length) return undefined;\n    if(2*this.length < this.arr.length) this._resize();\n    return this.arr[this.start++];\n  }\n}\n\n// Heap\n// Heap with update (Heap Object)\n// RMQ with Fenwick tree\n// RMQ inverse (set max min, get value)\n// Suffix array\n\n\n// https://caph.info/wiki/\n\nexport const BruteForceSuffixArray = (/**@type {string|number[]}*/seq)=>{\n  let arr = !isString(seq)?seq:[...seq].map((_,i)=>seq.charCodeAt(i));\n  const n = arr.length;\n  const suffixArray = range(n);\n  suffixArray.sort((i,j)=>{\n    for(let k=0; i+k<n && j+k<n; k++){\n      if(arr[i+k]<arr[j+k]) return -1;\n      if(arr[i+k]>arr[j+k]) return 1;\n    }\n    return i>j?-1:1;\n  });\n  return {suffixArray};\n}\n\nexport const SuffixArray = (/**@type {string|number[]}*/seq)=>{\n  // Convert to sequence of numbers\n  let rank = !isString(seq)?seq:[...seq].map((_,i)=>seq.charCodeAt(i));\n  let n = rank.length;\n  let shift = 0;\n  while(1<<shift <= n) shift+=1\n  let quickStop = false;\n\n  /** @param {number[]} arr @returns {number[]}*/\n  const ranked = (arr)=>{\n    // Rescales [20 44 44 30 20 10] into [1 3 3 2 1 0]\n    let sortedUnique = [...new Set(arr)].sort((a,b)=>a-b);\n    let ranks = Object.fromEntries(sortedUnique.map((x,i)=>[x,i]));\n    if(sortedUnique.length==n) quickStop = true;\n    return arr.map(x=>ranks[x]);\n  }\n\n  rank = ranked(rank);\n  for(let k=1; !quickStop && k <= n; k = 2*k){\n    rank = rank.map((x,i) => (x<<shift) + (rank[i+k]||0));\n    rank[n-k] -= 1; // resolve the crucial tie with end character\n    rank = ranked(rank);\n  }\n\n  const suffixArray = [...Array(n).fill(0)];\n  for(let i=0;i<n;i++) suffixArray[rank[i]] = i\n\n  const print = (k=10)=>{\n    for(let i=0;i<n;i++){\n      let j = suffixArray[i];\n      let s = isString(seq)? seq.substring(j, j+k) : JSON.stringify(seq.slice(i,j));\n      if(s.includes('\\n')) s = s.substring(0, s.indexOf('\\n')) + '|';\n      console.log(`${i} ${j} ${s}`);\n    }\n    return\n  }\n  return {suffixArray, print, rank};\n}\n","//@ts-check\n\nconst compressed = [];\nexport const distPlugins = [\n  'core-menu',\n  'core-about',\n  'katex',\n  'codemirror',\n  'phonetics',\n  // 'fabric.lz.js',\n  // 'mathjax-svg',\n  // // 'gtag',\n  // 'document',\n  // 'slides',\n  // 'whiteboard',\n  // //'figure-editor',\n  // 'hyphenator',\n  // 'auto-scroll',\n].map(name=>({\n  key: `@${name}`,\n  dist: `@dist/components/${name}${compressed.includes(name)?'.lz':''}.js`,\n  src: `plugins/${name}/plugin-${name}.js`,\n}));\n\nexport const compressor = {\n  dist: '@dist/lzutf8.min.js',\n  src: 'libraries/lzutf8-0.6.3/lzutf8.min.js',\n};\n\n/**@param {any} compressor @param {string} text @returns {string}*/\nexport const compress = (compressor, text)=> compressor.compress(text, {outputEncoding: 'Base64'});\n\n/**@param {any} compressor @param {string} text @returns {string}*/\nexport const decompress = (compressor, text)=> compressor.decompress(text, {inputEncoding: 'Base64'});\n\n","//@ts-check\nimport { MyDocument, sleep, until } from \"./utils.js\";\nimport {compressor, decompress, distPlugins} from \"./build-constants.js\";\n\n\nconst plugins = Object.fromEntries(distPlugins.map(e => [e.key, e]));\n\nexport const scriptLoader = (()=>{\n\n  let dist = './dist';\n  for (const e of document.querySelectorAll('script')) {\n    const m = e.src.match(/^(.*)\\/caph-docs\\.(?:min\\.)?js$/)\n    if (m) dist = m[1];\n  }\n  //console.log(dist);\n\n  const div = document.getElementById('core-sources') || MyDocument.createElement('div', {\n    id: 'core-sources',\n    parent: document.head,\n    where: 'beforeend',\n  });\n\n\n  const _randomSessionSuffix = ('' + Math.random()).slice(2);\n  const parseKey = (/** @type {string} */ key)=>{\n    // key is like either 'userComponent', './userFileComponent', '@caphPlugin', '@dist/caphPlugin', 'full URL'\n    let url = key.replace(/^@dist\\/(.*)$/, (_, p)=>`${dist}/${p}`);\n    if(url.startsWith('./')) url += `?${_randomSessionSuffix}`;\n    url = new URL(url, document.baseURI).href;\n    /** @type {string|null} */\n    let proxyKey = null;\n    if(plugins[key]) ({dist:proxyKey} = plugins[key]);\n    return {url, proxyKey};\n  }\n\n  /**\n   * @param {string} ref \n   * @param {{\n   * parent?: HTMLElement|null,\n   * where?: 'beforebegin' | 'afterbegin' | 'beforeend' | 'afterend',\n   * attrs?: {[key:string]:string},\n   * autoAttrs?: boolean,\n   * isCompressed?: boolean|null,\n   * msTimeout?: number,\n   * }} options\n   */\n  const load = (ref, { attrs={}, parent=null, where='beforeend', autoAttrs=true} = {})=>{\n    ({url:ref} = parseKey(ref)); // especially for plugin loading libraries\n    const refBase = ref.split('#')[0].split('?')[0]\n    if (parent == null) parent = div;\n    const ext = refBase.split('.').pop();\n    let tag = ext == 'js' ? 'script' : ext == 'css' ? 'link' : null;\n    if (tag == null) throw new Error('Only .js and .css files can be _sources. Got: ' + ext + ' ' + ref);\n    let /** @type {{[key:string]:string}}*/ defaults = {};\n    if (autoAttrs && tag == 'link') defaults = { rel: 'stylesheet', type: 'text/css' };\n    Object.keys(attrs).forEach(k => defaults[k] = attrs[k]);\n    attrs = defaults;\n    if (tag == 'script') attrs.src = ref;\n    if (tag == 'link') attrs.href = ref;\n    _load_elem(ref, tag, attrs, parent, where);\n  }\n\n  // const loadFont = async(/** @type {string}*/name)=>{\n  //   return await load(`${dist}/font-${name}.css`);\n  // }\n  // async loadPlugin(name) {\n  //   return await this.load(`${dist}/plugin-${name}.js`);\n  // }\n\n  const status = {};\n\n  const _load_elem = (ref, tag, attrs, parent, where) => new Promise((_ok, _err) => {\n    if (status[ref]) return _ok(null); \n    status[ref] = true;\n    let e = document.createElement(tag);\n    for(let key in attrs) e.setAttribute(key, attrs[key]);\n    let done = false;\n    e.onload = () => { if (!done) { done = true; _ok(null); } };\n    e.onerror = (err) => { if (!done) { done = true; _err(err); } }; // HTTP errors only\n    parent.insertAdjacentElement(where, e);\n  });\n\n  const injectStyle = (/** @type {string} */ styleStr)=>{\n    MyDocument.createElement('style', { parent: div, where: 'beforeend', text: styleStr });\n  }\n  return {injectStyle, load, div, dist, parseKey};\n})();\n\nexport const parseKey = scriptLoader.parseKey;\nexport const injectStyle = scriptLoader.injectStyle;\nexport const load = scriptLoader.load;\n","var n,l,u,i,t,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function h(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return v(l,f,t,o,null)}function v(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function y(){return{current:null}}function p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?_(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function b(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||setTimeout)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=s({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?_(t):o,t.__h),z(u,t),t.__e!=o&&k(t)))})}function w(n,l,u,i,t,o,r,c,s,a){var h,y,d,k,b,g,w,x=i&&i.__k||e,C=x.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(k=u.__k[h]=null==(k=l[h])||\"boolean\"==typeof k?null:\"string\"==typeof k||\"number\"==typeof k||\"bigint\"==typeof k?v(null,k,null,null,k):Array.isArray(k)?v(p,{children:k},null,null,null):k.__b>0?v(k.type,k.props,k.key,null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(d=x[h])||d&&k.key==d.key&&k.type===d.type)x[h]=void 0;else for(y=0;y<C;y++){if((d=x[y])&&k.key==d.key&&k.type===d.type){x[y]=void 0;break}d=null}j(n,k,d=d||f,t,o,r,c,s,a),b=k.__e,(y=k.ref)&&d.ref!=y&&(w||(w=[]),d.ref&&w.push(d.ref,null,k),w.push(y,k.__c||b,k)),null!=b?(null==g&&(g=b),\"function\"==typeof k.type&&k.__k===d.__k?k.__d=s=m(k,s,n):s=A(n,k,d,x,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&d.__e==s&&s.parentNode!=n&&(s=_(d))}for(u.__e=g,h=C;h--;)null!=x[h]&&(\"function\"==typeof u.type&&null!=x[h].__e&&x[h].__e==u.__d&&(u.__d=_(i,h+1)),N(x[h],x[h]));if(w)for(h=0;h<w.length;h++)M(w[h],w[++h],w[++h])}function m(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?m(i,l,u):A(u,i,i,t,i.__e,l));return l}function x(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){x(n,l)}):l.push(n)),l}function A(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||c.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var a,h,v,y,_,k,b,g,m,x,A,C,$,H=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(a=l.__b)&&a(u);try{n:if(\"function\"==typeof H){if(g=u.props,m=(a=H.contextType)&&t[a.__c],x=a?m?m.props.value:a.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in H&&H.prototype.render?u.__c=h=new H(g,x):(u.__c=h=new d(g,x),h.constructor=H,h.render=O),m&&m.sub(h),h.props=g,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=H.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=s({},h.__s)),s(h.__s,H.getDerivedStateFromProps(g,h.__s))),y=h.props,_=h.state,v)null==H.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==H.getDerivedStateFromProps&&g!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(g,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(g,h.__s,x)||u.__v===i.__v){h.props=g,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(g,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,_,k)})}if(h.context=x,h.props=g,h.__v=u,h.__P=n,A=l.__r,C=0,\"prototype\"in H&&H.prototype.render)h.state=h.__s,h.__d=!1,A&&A(u),a=h.render(h.props,h.state,h.context);else do{h.__d=!1,A&&A(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++C<25);h.state=h.__s,null!=h.getChildContext&&(t=s(s({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,_)),$=null!=a&&a.type===p&&null==a.key?a.props.children:a,w(n,Array.isArray($)?$:[$],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(a=l.diffed)&&a(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,e,c){var s,h,v,y=i.props,p=u.props,d=u.type,k=0;if(\"svg\"===d&&(o=!0),null!=r)for(;k<r.length;k++)if((s=r[k])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[k]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),h=(y=i.props||f).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},k=0;k<l.attributes.length;k++)y[l.attributes[k].name]=l.attributes[k].value;(v||h)&&(v&&(h&&v.__html==h.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(k=u.props.children,w(l,Array.isArray(k)?k:[k],u,i,t,o&&\"foreignObject\"!==d,r,e,r?r[0]:i.__k&&_(i,0),c),null!=r)for(k=r.length;k--;)null!=r[k]&&a(r[k]);c||(\"value\"in p&&void 0!==(k=p.value)&&(k!==l.value||\"progress\"===d&&!k||\"option\"===d&&k!==y.value)&&H(l,\"value\",k,y.value,!1),\"checked\"in p&&void 0!==(k=p.checked)&&k!==l.checked&&H(l,\"checked\",k,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,\"function\"!=typeof n.type);i||null==n.__e||a(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function P(u,i,t){var o,r,e;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,e=[],j(i,u=(!o&&t||i).__k=h(p,null,[u]),r||f,f,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,e,!o&&t?t:r?r.__e:i.firstChild,o),z(e,u)}function S(n,l){P(n,l,S)}function q(l,u,i){var t,o,r,f=s({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),v(l.type,f,t||l.key,o||l.ref,null)}function B(n,l){var u={__c:l=\"__cC\"+r++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(b)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=e.slice,l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},d.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(s({},u),this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),b(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),b(this))},d.prototype.render=p,t=[],g.__r=0,r=0;export{P as render,S as hydrate,h as createElement,h,p as Fragment,y as createRef,i as isValidElement,d as Component,q as cloneElement,B as createContext,x as toChildArray,l as options};\n//# sourceMappingURL=preact.module.js.map\n","import{options as n}from\"preact\";var t,r,u,i,o=0,c=[],f=[],e=n.__b,a=n.__r,v=n.diffed,l=n.__c,m=n.unmount;function d(t,u){n.__h&&n.__h(r,t,o||u),o=0;var i=r.__H||(r.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:f}),i.__[t]}function p(n){return o=1,y(z,n)}function y(n,u,i){var o=d(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):z(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.u)){r.u=!0;var c=r.shouldComponentUpdate;r.shouldComponentUpdate=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=!1;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),!!i&&(!c||c.call(this,n,t,r))}}return o.__N||o.__}function h(u,i){var o=d(t++,3);!n.__s&&w(o.__H,i)&&(o.__=u,o.i=i,r.__H.__h.push(o))}function s(u,i){var o=d(t++,4);!n.__s&&w(o.__H,i)&&(o.__=u,o.i=i,r.__h.push(o))}function _(n){return o=5,F(function(){return{current:n}},[])}function A(n,t,r){o=6,s(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==r?r:r.concat(n))}function F(n,r){var u=d(t++,7);return w(u.__H,r)?(u.__V=n(),u.i=r,u.__h=n,u.__V):u.__}function T(n,t){return o=8,F(function(){return n},t)}function q(n){var u=r.context[n.__c],i=d(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function x(t,r){n.useDebugValue&&n.useDebugValue(r?r(t):t)}function V(n){var u=d(t++,10),i=p();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n){u.__&&u.__(n),i[1](n)}),[i[0],function(){i[1](void 0)}]}function b(){for(var t;t=c.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(j),t.__H.__h.forEach(k),t.__H.__h=[]}catch(r){t.__H.__h=[],n.__e(r,t.__v)}}n.__b=function(n){r=null,e&&e(n)},n.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=f,n.__N=n.i=void 0})):(i.__h.forEach(j),i.__h.forEach(k),i.__h=[])),u=r},n.diffed=function(t){v&&v(t);var o=t.__c;o&&o.__H&&(o.__H.__h.length&&(1!==c.push(o)&&i===n.requestAnimationFrame||((i=n.requestAnimationFrame)||function(n){var t,r=function(){clearTimeout(u),g&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,100);g&&(t=requestAnimationFrame(r))})(b)),o.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==f&&(n.__=n.__V),n.i=void 0,n.__V=f})),u=r=null},n.__c=function(t,r){r.some(function(t){try{t.__h.forEach(j),t.__h=t.__h.filter(function(n){return!n.__||k(n)})}catch(u){r.some(function(n){n.__h&&(n.__h=[])}),r=[],n.__e(u,t.__v)}}),l&&l(t,r)},n.unmount=function(t){m&&m(t);var r,u=t.__c;u&&u.__H&&(u.__H.__.forEach(function(n){try{j(n)}catch(n){r=n}}),r&&n.__e(r,u.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function k(n){var t=r;n.__c=n.__(),r=t}function w(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function z(n,t){return\"function\"==typeof t?t(n):t}export{p as useState,y as useReducer,h as useEffect,s as useLayoutEffect,_ as useRef,A as useImperativeHandle,F as useMemo,T as useCallback,q as useContext,x as useDebugValue,V as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","//@ts-check\n/// <reference path=\"types.js\" />\nimport { assertNonNull, assert, until, sleep } from './utils.js';\nimport { createParser } from './parser.js';\nimport { load, parseKey, injectStyle } from './script-loader.js';\nimport * as preact from 'preact';\nimport { useMemo, useCallback, useState, useEffect} from 'preact/hooks';\n\n/** @typedef {(props:Object)=>Elem} Component */\n\n\nexport const createPreactParser = ()=>{\n  const parser = createParser();\n  parser.settings.FragmentComponent = preact.Fragment;\n  parser.settings.createElement = (type, props, ...children)=> {\n    if (props && props.hasOwnProperty('(component)')) {\n      let pluginKey = props['(component)'];\n      type = plugin(pluginKey);\n      // if (pluginKey) type = plugin(pluginKey);\n      // else console.warn('caph tag without plugin attribute');\n    }\n    const vDom = preact.createElement(type, props, ...children);\n    return vDom;\n  }\n  return parser;\n}\n\nexport const parser = createPreactParser();\n\n/** @type {{[key:string]: Component|Promise<Component>}} */\nexport const pluginDefs = {}\n\n\n/** @type {{[key:string]: Component}} */\nconst pluginComponents = {}\nexport const plugin = (/** @type {string} */ key)=>{ // key is either a tag or a url\n  const cache = pluginComponents;\n  return cache[key] || (cache[key] = componentWrapper(key));\n}\n\n/** @type {{[key:string]: Component}} */\nconst componentWrappers = {};\nconst componentWrapper = (/** @type {string} */ key)=>{\n  const cache = componentWrappers;\n  return cache[key] || (cache[key] = newPluginLoader(key));\n}\n\n/** @returns {Component} */\nconst newPluginLoader = (/** @type {string}*/ key)=>{\n  //scriptLoader.load('caph-docs/core/plugin-loader.css');\n\n  const loadStatus = {\n    Component: /** @type {null|Component}*/(null),\n    error: null,\n    renderReady: false,\n  }\n\n  function FinalComponent({ children, ...props }) {\n    try {\n      const Component = assertNonNull(loadStatus.Component);\n      const out = Component({ children, ...props });\n      assert(!out.then, `Your component can not be a promise itself (${key}).\n      Maybe you defined pluginDefs[...] = (async ()=>{...}) instead of pluginDefs[...] = (async ()=>{...})()?\n      Please follow the IIFE pattern for async promises.`);\n      return out;\n    } catch (err) {\n      console.error(`Rendering error in plugin ${key}:`, err);\n      return parser.parse`<code class=\"caph-flashing\">${children || '...error...'}</code>`;\n    }\n  }\n\n  function LoadingComponent({ children }) {\n    return parser.parse`\n    <code class=\"caph-flashing\" title=${`${key} is loading...`}>${children || '...'}</code>`;\n  }\n\n  function LoadErrorComponent({}) {\n    return parser.parse`<${plugin('core-error')} tooltip=${loadStatus.error}/>`;\n  }\n\n  const {url, proxyKey} = parseKey(key);\n  const main = async ()=>{\n    // 1. Put the plugin script in the document head and wait for the browser to load the script\n    try{\n      if (pluginDefs.hasOwnProperty(key)){} // already loaded\n      else if (proxyKey) {\n        pluginDefs[key] = componentWrapper(proxyKey);\n      } else if(url) {\n        load(url);\n        await until(() => pluginDefs[url], { timeout: 3800});\n        // assert(pluginDefs[url], `Plugin ${key} not declared in file ${url}`);\n        pluginDefs[key] = pluginDefs[url];\n        if (key != url) delete pluginDefs[url];\n      } else {\n        await until(() => pluginDefs[key], {timeout: 3800});\n      } // User plugin\n    } catch(err){\n      loadStatus.error = err || true;\n      console.error(`Could not load plugin ${key}`, err);\n      return;\n    }\n    // 3. Start the plugin promise but don't wait for it\n    (async()=>{\n      try {\n        loadStatus.Component = await pluginDefs[key];\n        loadStatus.renderReady = true;\n      } catch (err) {\n        loadStatus.error = err || true;\n        console.log(pluginDefs[key])\n        console.error(`Error while awaiting pluginDefs[\"${key}\"]`, err);\n      }\n    })();\n  }\n  main();\n  return ({ children, ...props })=>{\n    const [trigger, setTrigger] = useState(0);\n\n    const asyncLoad = useCallback(async () => {\n      await until(() => loadStatus.renderReady || loadStatus.error);\n      setTrigger(Math.random() * 1e12); // refresh this component\n    }, []);\n    useEffect(()=>{asyncLoad()}, []);\n    \n    const Component = useMemo(()=>{\n      if (loadStatus.renderReady) return FinalComponent;\n      else if (loadStatus.error) return LoadErrorComponent;\n      else return LoadingComponent;\n    }, [trigger]);\n    \n    return Component({ children, ...props })\n  };\n}\n\n\n\n\npluginDefs['core-error'] = (async () => ({ children, tooltip }) => {\n  const help = useCallback(() => {\n    const win = window.open('', '_blank');\n    if (!win) throw new Error('Popup blocked');\n    win.document.write(`\n      <div>\n        1. In tex, use \\\\lt and \\\\gt instead of &lt; and &gt;.\n        <br/>\n        2. In html, use \\\\$ instead of $.\n        <br/>\n        This prevents any parsing misunderstanding.\n      </div>\n    `);\n  }, []);\n  return parser.parse`\n    <a href=\"./error-help\" onclick=${(e) => {\n    e.preventDefault();\n      help();\n    }}>(help?)</a> \n    <code class=\"caph-flashing caph-error\" title=${tooltip}>${children || tooltip || 'Error'}</code>\n  `;\n})();\n\n// pluginDefs['@paragraphs'] = (async () =>({ children }) => useMemo(\n//     ()=>this._evalAst([null, null, parser.spacingRulesParagraphs(preact.toChildArray(children))]),\n//     [children],\n// ))();\n\n// pluginDefs['code'] = (async () => ({ children, progLang }) => useMemo(\n//   ()=>parser..parse`<code>${children}</code>`,\n//   [children],\n// ))(),\n\n\nparser.settings.customRules = [\n  {\n    regStart: `(?<!\\\\\\\\)\\\\$`,\n    regEnd: `(?<!\\\\\\\\)\\\\$`,\n    parser: ((text)=> parser.parse`<div (component)=${'@katex'}>${text}</>`),\n  },\n]\n\nconst reg = /(?<!\\\\)\\\\$(.*?)(?<!\\\\)\\\\$/;\n\n\ninjectStyle(`\n.caph-error{\n  color: #ce1111;\n}\n.caph-flashing{\n  -webkit-animation: caphFlashingAnimation 1s linear infinite;\n  animation: caphFlashingAnimation 1s linear infinite;\n}\n@keyframes caphFlashingAnimation {\n  0% { opacity: 0.3; }\n  100% { opacity: 1; }\n}\n\n.caph-hidden{\n  display: none;\n}\n\n.caph-box-shadow{\n  box-shadow: 0px 0px 0.3rem 0.05rem var(--box-shadow);\n}\n.caph-box-shadow:hover{\n  box-shadow: 0px 0px 0.3rem 0.2rem var(--box-shadow);\n}\n.caph-fullscreen-layer{\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 100;\n}\n.caph-hbox{ display: flex; }\n.caph-vbox{ display: flex; flex-direction: column; }\n.caph-boxcenter{ justify-content: center; }\n.caph-space-around{ justify-content: space-around; }\n.caph-space-between{ justify-content: space-between; }\n.caph-flex{ flex: 1; }\n.caph-hidden{ display:none; }\n.caph-plugin-hidden{ display:none; }\n.caph-border{\n  border: solid 2px var(--text-strong);\n}`)\n","//@ts-check\nimport { MyPromise } from \"./utils.js\";\nimport { parser, plugin } from \"./preact-parser.js\";\nimport { createContext, render } from \"preact\";\nimport {useMemo, useCallback, useState, useEffect} from 'preact/hooks';\n\nexport const contexts = {};\ncontexts['core-menu'] = createContext(null);\n\nexport const _globals = {};\nexport function dispatchGlobal(eventName, value) {\n  //console.log('Dispatch', eventName, value);\n  _globals[eventName] = value;\n  let event = new CustomEvent(eventName, {detail:value});\n  window.dispatchEvent(event);\n  return;\n}\nexport async function untilGlobal(eventName) {\n  await MyPromise.until(() => _globals[eventName]);\n  await MyPromise.sleep(500);\n}\nexport function listenToGlobal(eventName) {\n  const initial = useMemo(()=>_globals[eventName], [eventName]);\n  const [value, setValue] = useState(initial);\n  listenToEvent(eventName, setValue);\n  return value;\n}\n\nexport const menu = new class {\n  constructor() {\n    this.addOption('Default', { hold: true });\n    this.latest = this.option = 'Default';\n  }\n  options = [];\n  onEnter = {};\n  onExit = {};\n  hold = {};\n\n  /**\n   * @param {string} option\n   * @param {{onEnter?:()=>void, onExit?:()=>void, hold?:boolean}} options\n  */\n  addOption(option, { onEnter, onExit, hold } = {}) {\n    this.onEnter[option] = onEnter;\n    this.onExit[option] = onExit;\n    this.hold[option] = hold;\n    if (this.options[option]) return;\n    this.options.push(option);\n    this.options[option] = 1;\n    dispatchGlobal('caph-menu-options', Math.random());\n  }\n  setOption(option) {\n    dispatchGlobal('caph-menu-option', Math.random());\n    if (this.hold[option]) {\n      this.onExit[this.latest] && this.onExit[this.latest]();\n      this.latest = this.option;\n      this.option = option;\n    }\n    this.onEnter[option] && this.onEnter[option]();\n  }\n};\n\nexport async function inject(vDom) {\n  // const node = MyDocument.createElement('div', {\n  //   parent: document.body,\n  //   where: 'afterbegin',\n  //   id: 'core-body',\n  // })\n  const node = document.body;\n  render(vDom, node);\n}\n\nMyPromise.until(() => document.body).then(()=>{\n  inject(parser.parse`\n    <${plugin('@core-menu')}/>\n    <${plugin('@core-about')}/>\n  `);\n});\n\n/**\n * @param {string} eventName \n * @param {(data:any)=>void} callback \n */\nexport function listenToEvent(eventName, callback) {\n  useEffect(() => {\n    const actualCallback = (/** @type {Event|CustomEvent}*/ e) => {\n      //@ts-ignore: event.detail is not defined for non-custom events\n      try{callback(e.detail);}\n      catch(err){}\n    }\n    window.addEventListener(eventName, actualCallback);\n    return () => {\n      window.removeEventListener(eventName, actualCallback);\n    }\n  }, [eventName, callback]);\n}\n\n","//@ts-check\nimport { MyPromise, sleep, assert, assertNonNull } from \"./utils.js\";\nimport * as collections from \"./collections.js\";\nimport { createParser as createAstParser } from \"./parser.js\";\nimport { parser, pluginDefs, plugin, createPreactParser } from \"./preact-parser.js\";\nimport { contexts, menu, listenToEvent, listenToGlobal } from \"./preact-globals.js\";\nimport { toChildArray } from \"preact\";\nimport { useMemo, useState } from \"preact/hooks\";\nimport { load, injectStyle } from \"./script-loader.js\";\nimport * as scriptLoader from \"./script-loader.js\";\nimport * as preactBase from \"preact\";\nimport * as preactHooks from \"preact/hooks\";\nimport { compressor, decompress } from \"./build-constants.js\";\n/** @typedef {import(\"./preact-parser\").Component} Component */ \n\n\nexport const preact = {...preactBase, ...preactHooks};\nwindow[\"preact\"] = preact;\n\nexport const libraries = {};\nlibraries.preact = preact;\n(async()=>{ libraries.lzutf8=await MyPromise.until(()=>window['LZUTF8']); })();\n\nexport { scriptLoader, load, injectStyle, createAstParser };\nexport {parser, pluginDefs, plugin, createPreactParser};\nexport const {parse, parseAst, parseAstHtml, parseHtml} = parser;\n\nconst noRulesParser = createPreactParser();\nnoRulesParser.settings.customRules = [];\nexport const {parse: parseNoMarkup} = noRulesParser;\n\n\nexport const parseElem = (/** @type {HTMLElement}*/elem, /** @type {('clear'|'hide'|'remove')?}*/action) => {\n  const html = elem.innerHTML;\n  if(!action){} // Do nothing\n  else if(action=='clear') elem.innerHTML = '';\n  else if(action=='remove') elem.remove();\n  else if (action=='hide') elem.classList.add('caph-hidden');\n  return parseHtml(html);\n}\n\nexport const until = MyPromise.until;\nexport {assert, sleep};\nexport { collections };\nexport {contexts, menu, listenToEvent, listenToGlobal};\n\n\n/** @param {Component | Promise<Component>} definition */ \nexport const defineFileComponent = (definition)=>{\n  const elem = assertNonNull(document?.currentScript);\n  /** @type {string}*/\n  const src = elem.getAttribute('data-original-src')||elem['src'];\n  pluginDefs[src] = definition;\n}\n\n/** @param {string} dist @param {string} compressedSequence */ \nexport const injectCompressedScript = async (dist, compressedSequence)=>{\n  /* Used in all compressed plugins. See build-plugins.js */  \n  await load(compressor.dist);\n  await until(()=>window['LZUTF8']);\n  const jsCode = decompress(window[\"LZUTF8\"], compressedSequence);\n  const e = document.createElement('script');\n  const {url} = scriptLoader.parseKey(dist);\n  e.setAttribute('data-original-src', url);\n  e.innerHTML = jsCode;\n  document.getElementById('core-sources')?.insertAdjacentElement('beforeend', e);\n}\n\n\n\nexport const settings = {\n  get mathParser(){ return parser.mathParser; },\n  mathMacros: {},\n  set mathParser(/** @type {'@katex'|'@mathjax'} */value) {\n    parser.mathParser = value;\n  }\n};\n\ninjectStyle(`\ndiv.caph-paragraph + div.caph-paragraph { margin-top: 1em; }\n.caph-paragraph h1,h2,h3,h4,h5,h6,ul,ol{ margin:0; }\ncode {\n  padding: 0em 0.2em;\n  background-color: #f8f9fa;\n  color: #000;\n  border: 1px solid #eaecf0;\n  border-radius: 2px;\n}\n`);\n\n// tab effects: https://alvarotrigo.com/blog/html-css-tabs/\ninjectStyle(`\n.tabs-header>label>input { display: none; }\n.tabs-parent { width: 100%; }\n.tabs-header {\n  margin-top: 0.1em;\n  border-bottom: 1px solid;\n}\n.tab-label:hover {\n  top: -0.25rem;\n  transition: top 0.25s;\n}\n.tabs{\n  border: solid 1px;\n  border-top: none;\n}\n.tab-label {\n  padding-left: 1em;\n  padding-right: 1em;\n  border-radius: 0.3em 0.3em 0 0;\n  background: unset;\n  border: solid 1px;\n  white-space:nowrap;\n}\n/* https://stackoverflow.com/a/10148189/3671939 */\n.tab-label { white-space:nowrap; }\n.tab-label > span{ white-space: normal; }\n\n.tab-label-true {\n  font-weight: bold;\n  border-bottom: solid 2px white;\n}\n.tab-content-false { display:none; }\n.tab-content-true {\n  display: true;\n  opacity: 1;\n\tanimation-name: fadeInOpacity;\n\tanimation-iteration-count: 1;\n\tanimation-timing-function: ease-in;\n\tanimation-duration: 0.15s;\n}\n@keyframes fadeInOpacity {\n\t0% { opacity: 0; }\n\t100% { opacity: 1;}\n}\n.tab-content-true { padding: 1vw; }\n`);\npluginDefs['@tabs'] = ({/** @type {string[]} */ labels, defaultLabel, children})=>{\n  const zipped = useMemo(()=>toChildArray(children).map(\n    (child,i) => ({label:labels[i]||`Tab ${i+1}`, child})\n  ), [labels, children]);\n  const [option, setOption] = useState(defaultLabel || zipped[0]?.label);\n  return parse`\n  <div class=\"tabs-parent\">\n    <div class=\"tabs-header\">\n      ${labels.map((label)=>parse`\n        <label class=\"tab-label\" class=${'tab-label-'+(option==label)}>\n          <input type=\"radio\" checked=${option==label} onClick=${()=>setOption(label)}/>\n          <span>${label}</>\n        </label>`\n      )}\n    </div>\n    <div class=\"tabs\">\n      ${zipped.map(({label, child})=>parse`\n        <div class=${'tab-content-'+(option==label)}>${child}</>`\n      )}\n    </div>\n  </>`;\n}\n","import * as caph from './main.js';\n\nexport default caph;"],"names":["htmlSafe","str","Option","innerHTML","htmlSafeUndo","l","content","match","DOMParser","parseFromString","documentElement","textContent","AstParser","ESC","SPEC","DEBUG","static","raw","strings","values","this","root","warn","args","console","error","constructor","customRules","debug","cls","join","escaped","regEscaped","RegExp","replace","index","pos","valueIndex","errorStop","log","optionalClose","bind","REG_EXP_TEXT","map","regStart","parent","parseRoot","evalTree","createElement","FragmentComponent","Array","isArray","tag","props","children","child","parseChildrenAndParentClose","name","length","parentTag","parentProps","childlessTags","br","area","base","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","_optionalClose","run","regExp","lastIndex","exec","throw","tryRun","e","tryRunUndo","debugPosition","delta","at","Math","max","slice","text","push","value","startsWith","consumeComment","endReached","parsedRule","regEnd","parser","m","replaceText","result","_tag","newParent","grandParent","parseParent","pop","reg","undefined","admitsChildren","toLowerCase","spacing","key","_value","endsWith","eval","prevValue","includes","code","spacingRulesJsx","spacingRulesParagraphs","stack","filter","x","reverse","newChildren","split","forEach","i","_","middle","r","trimText","first","elems","reason","Error","regComment","posOfText","original","exampleCreateElement","type","exampleFragmentComponent","exampleCustomRules","displayMode","progLang","createParser","settings","parseAst","templateString","astUndoHtml","parseAstHtml","ast","parse","parseHtml","assertNonNull","range","n","fill","isString","obj","Object","prototype","toString","call","assert","condition","messages","sleep","ms","Promise","ok","err","setTimeout","MyPromise","promises","any_error","cnt","outs","p","all","async","finish_all","func","timeout","t0","Date","getTime","Timeout","promise","finished","resp","then","until","MyDocument","style","id","classList","html","eventListeners","where","attrs","document","setAttribute","s","add","innerText","MyObject","addEventListener","body","insertAdjacentElement","element","focus","window","CustomEvent","dispatchEvent","createEvent","ev","initEvent","fireEvent","arr","M","_object_op","op","src","dest","keys","_func","dotted","v","k","indexOf","no_dots","start","end","reduce_dots","objs","o","deep_assign","deep_copy","default_obj","filter_func","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","defineProperty","enumerable","get","prop","hasOwnProperty","Symbol","toStringTag","BruteForceQueue","items","iterator","pushRight","pushLeft","unshift","popRight","popLeft","shift","Queue","iterI","_resize","BruteForceSuffixArray","seq","charCodeAt","suffixArray","sort","j","SuffixArray","rank","quickStop","ranked","sortedUnique","Set","a","b","ranks","fromEntries","print","substring","JSON","stringify","compressed","distPlugins","dist","plugins","scriptLoader","querySelectorAll","div","getElementById","head","_randomSessionSuffix","random","parseKey","url","URL","baseURI","href","proxyKey","status","injectStyle","styleStr","load","ref","autoAttrs","refBase","ext","defaults","rel","_ok","_err","done","onload","onerror","_load_elem","u","t","f","c","parentNode","removeChild","h","arguments","defaultProps","__k","__","__b","__e","__d","__c","__h","__v","vnode","y","current","context","g","__r","debounceRendering","some","__P","__n","ownerSVGElement","z","w","C","A","N","appendChild","nextSibling","insertBefore","$","setProperty","test","H","cssText","T","I","removeEventListener","removeAttribute","event","contextType","__E","render","O","sub","state","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","L","diffed","localName","nodeType","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","checked","unmount","componentWillUnmount","P","firstChild","S","q","B","Consumer","Provider","splice","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","__H","__V","__N","every","F","concat","V","clearTimeout","cancelAnimationFrame","requestAnimationFrame","createPreactParser","pluginKey","pluginDefs","pluginComponents","cache","componentWrapper","componentWrappers","newPluginLoader","loadStatus","Component","renderReady","FinalComponent","out","LoadingComponent","LoadErrorComponent","main","trigger","setTrigger","asyncLoad","tooltip","help","win","open","write","preventDefault","contexts","_globals","dispatchGlobal","eventName","detail","listenToGlobal","initial","setValue","listenToEvent","menu","addOption","hold","latest","option","options","onEnter","onExit","setOption","callback","actualCallback","vDom","inject","preact","libraries","lzutf8","noRulesParser","parseNoMarkup","parseElem","elem","action","remove","defineFileComponent","currentScript","getAttribute","injectCompressedScript","compressedSequence","jsCode","compressor","decompress","inputEncoding","mathParser","mathMacros","labels","defaultLabel","zipped","label"],"sourceRoot":""}